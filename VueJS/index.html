<!DOCTYPE html>
<head xmlns:v-bind="http://www.w3.org/1999/xhtml" xmlns:v-on="http://www.w3.org/1999/xhtml">
  <title>salut lol</title>
  <meta charset="utf-8">
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>

  <div class="title" id="title">
    {{ title }}
  </div>

  <div class="container">

    <div id="market">
      <ul class="items">
        <li v-for="carambar in carambars">

          <div class="card">
            <img class="card-img-top" v-bind:src="carambar.image"/>
            <div class="card-body">
              <p class="card-title"> {{ carambar.name }} </p>
              <p class="card-text">{{ carambar.desc }} </p>
            </div>
            <div class="card-bottom">              
            <a href="#" class="btn btn-primary" v-on:click="show(carambar)">Voir les offres</a>
            </div>
          </div>

        </li>
      </ul>


        <modal v-if="showModal" @close="showModal = false">
          <h3 slot="header">{{ selectedCarambar.name}}</h3>

          <div slot="desc">
            <div>{{ selectedCarambar.desc}}</div>
            <div class="modal-rating">
              <span v-for="n in 5">
                <img v-if="n <= selectedCarambar.rating" src="https://cdn4.iconfinder.com/data/icons/small-n-flat/24/star-512.png"/>
                <img v-if="n > selectedCarambar.rating" src="https://cdn4.iconfinder.com/data/icons/sports-technology-and-people/1000/2-01-512.png"/>
              </span>
            </div>
            <div>{{ selectedCarambar.offers.length}} vendeurs à proximité</div>
          </div>

          <div slot="img">
            <img class="modal-img" v-bind:src="selectedCarambar.image"/>
          </div>

          <div slot="offers">
            <ul class="list-group">
              <li v-for="offer in selectedCarambar.offers" class="list-group-item">{{offer.user}}</li>
            </ul>
          </div>
        </modal>

    </div>
  </div>







  <script type="text/x-template" id="modal-template">
    <transition name="modal">
      <div class="modal-mask">
        <div class="modal-wrapper">
          <div class="modal-container row">

            <div class="modal-header col-11">
              <slot name="header">
                default header
              </slot>
            </div>

            <div class="modal-close col-1">
              <button @click="$emit('close')">X</button>
            </div>

            <div class="modal-body">
              <div class="row">
                <div class="col-8">
                  <slot name="desc">
                    default desc
                  </slot>
                </div>
                <div class="col-4">
                  <slot name="img">
                    default img
                  </slot>
                </div>
              </div>

              <div class="modal-offers">
                <slot name="offers">
                  default offers
                </slot>
              </div>


            </div>

            <div class="modal-footer">
              <slot name="footer">
              </slot>
            </div>
          </div>
        </div>
      </div>
    </transition>
  </script>


  <script type="text/javascript" src="data.js"></script>
  <script type="text/javascript" src="script.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>